<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂêçË®Ä„Éá„Éº„Çø„Éô„Éº„Çπ</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .quote {
            border-left: 4px solid #007AFF;
            padding-left: 20px;
            margin: 20px 0;
            background: #f9f9f9;
            padding: 15px 20px;
            border-radius: 5px;
        }
        .quote-text {
            font-size: 18px;
            color: #333;
            margin-bottom: 10px;
        }
        .quote-author {
            color: #666;
            font-style: italic;
        }
        .api-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .language-switcher {
            text-align: center;
            margin: 20px 0;
        }
        .language-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        .language-btn:hover {
            background: #0056b3;
        }
        .language-btn.active {
            background: #28a745;
        }
        .original-text {
            font-style: italic;
            color: #888;
            margin-top: 10px;
            font-size: 16px;
        }
        .quote-meta {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .tag {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: #666;
        }
        .tag.category {
            background: #e3f2fd;
            color: #1976d2;
        }
        .tag.language {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .quote-source {
            color: #888;
            font-size: 14px;
            margin-top: 8px;
        }
        .quote-links {
            margin-top: 10px;
        }
        .quote-links a {
            color: #007AFF;
            text-decoration: none;
            font-size: 14px;
            margin-right: 15px;
        }
        .quote-links a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="main-title">üìù ÂêçË®Ä„Éá„Éº„Çø„Éô„Éº„Çπ</h1>
        
        <div class="language-switcher">
            <button class="language-btn active" data-lang="ja">Êó•Êú¨Ë™û</button>
            <button class="language-btn" data-lang="en">English</button>
            <button class="language-btn" data-lang="zh-TW">ÁπÅÈ´î‰∏≠Êñá</button>
        </div>
        
        <div class="api-info">
            <h3 id="api-title">API „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà</h3>
            <p><strong id="api-desc">ÂÖ®„Å¶„ÅÆÂêçË®Ä„ÇíÂèñÂæó:</strong> <code>quotes.json</code>, <code>authors.json</code>, <code>categories.json</code></p>
            <p id="api-note">„Åì„ÅÆJSON„Éï„Ç°„Ç§„É´„Å´„ÅØ„ÄÅiOS„Ç¢„Éó„É™„ÅßË°®Á§∫„Åï„Çå„ÇãÂêçË®Ä„Éá„Éº„Çø„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</p>
        </div>
        
        <h2 id="sample-title">„Çµ„É≥„Éó„É´ÂêçË®Ä</h2>
        <div id="quotes-container">
            <!-- „Åì„Åì„Å´ÂêçË®Ä„ÅåÂãïÁöÑ„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>
    </div>

    <script>
        let quotesData = null;
        let authorsData = null;
        let categoriesData = null;
        let currentLanguage = 'ja';

        const translations = {
            ja: {
                title: 'üìù ÂêçË®Ä„Éá„Éº„Çø„Éô„Éº„Çπ',
                apiTitle: 'API „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà',
                apiDesc: 'ÂÖ®„Å¶„ÅÆÂêçË®Ä„ÇíÂèñÂæó:',
                apiNote: '„Åì„ÅÆJSON„Éï„Ç°„Ç§„É´„Å´„ÅØ„ÄÅiOS„Ç¢„Éó„É™„ÅßË°®Á§∫„Åï„Çå„ÇãÂêçË®Ä„Éá„Éº„Çø„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                sampleTitle: '„Çµ„É≥„Éó„É´ÂêçË®Ä',
                original: 'ÂéüÊñá'
            },
            en: {
                title: 'üìù Quote Database',
                apiTitle: 'API Endpoints',
                apiDesc: 'Get all quotes:',
                apiNote: 'These JSON files contain quote data displayed in the iOS app.',
                sampleTitle: 'Sample Quotes',
                original: 'Original'
            },
            'zh-TW': {
                title: 'üìù ÂêçË®ÄË≥áÊñôÂ∫´',
                apiTitle: 'API Á´ØÈªû',
                apiDesc: 'Áç≤ÂèñÊâÄÊúâÂêçË®Ä:',
                apiNote: 'ÈÄô‰∫õJSONÊ™îÊ°àÂåÖÂê´iOSÊáâÁî®Á®ãÂºè‰∏≠È°ØÁ§∫ÁöÑÂêçË®ÄË≥áÊñô„ÄÇ',
                sampleTitle: 'ÁØÑ‰æãÂêçË®Ä',
                original: 'ÂéüÊñá'
            }
        };

        // Load all data files
        Promise.all([
            fetch('quotes.json').then(r => r.json()),
            fetch('authors.json').then(r => r.json()),
            fetch('categories.json').then(r => r.json())
        ])
        .then(([quotes, authors, categories]) => {
            quotesData = quotes;
            authorsData = authors;
            categoriesData = categories;
            renderQuotes();
        })
        .catch(error => console.error('Error loading data:', error));

        function getAuthorName(authorId, language) {
            const author = authorsData.authors.find(a => a.author_id === authorId);
            if (!author) return authorId.replace(/_/g, ' ');
            
            if (language === 'en' || !author.name_translations?.[language]) {
                return author.name;
            }
            return author.name_translations[language];
        }

        function getCategoryName(categoryId, language) {
            const category = categoriesData.categories.find(c => c.category_id === categoryId);
            if (!category) return categoryId.replace(/_/g, ' ');
            
            if (language === 'en' || !category.name_translations?.[language]) {
                return category.name;
            }
            return category.name_translations[language];
        }

        function getQuoteText(quote, language) {
            if (quote.translations?.[language]) {
                return quote.translations[language].text;
            }
            return quote.original_text;
        }

        function renderQuotes() {
            if (!quotesData || !authorsData || !categoriesData) return;
            
            const container = document.getElementById('quotes-container');
            container.innerHTML = '';
            
            quotesData.quotes.forEach(quote => {
                const quoteDiv = document.createElement('div');
                quoteDiv.className = 'quote';
                
                const text = getQuoteText(quote, currentLanguage);
                const authorName = getAuthorName(quote.author_id, currentLanguage);
                const categoryName = getCategoryName(quote.category_id, currentLanguage);
                const showOriginal = quote.translations?.[currentLanguage] && text !== quote.original_text;
                
                let linksHtml = '';
                if (quote.links && quote.links.length > 0) {
                    linksHtml = '<div class="quote-links">' +
                        quote.links.map(link => `<a href="${link.url}" target="_blank">${link.title}</a>`).join('') +
                        '</div>';
                }
                
                quoteDiv.innerHTML = `
                    <div class="quote-text">"${text}"</div>
                    ${showOriginal ? `<div class="original-text">${translations[currentLanguage].original}: "${quote.original_text}"</div>` : ''}
                    <div class="quote-author">‚Äî ${authorName}</div>
                    ${quote.source ? `<div class="quote-source">Âá∫ÂÖ∏: ${quote.source}</div>` : ''}
                    <div class="quote-meta">
                        <span class="tag category">${categoryName}</span>
                        <span class="tag language">${quote.original_language_code.toUpperCase()}</span>
                    </div>
                    ${linksHtml}
                `;
                container.appendChild(quoteDiv);
            });
        }

        function switchLanguage(language) {
            currentLanguage = language;
            
            // Update UI text
            document.getElementById('main-title').textContent = translations[language].title;
            document.getElementById('api-title').textContent = translations[language].apiTitle;
            document.getElementById('api-desc').textContent = translations[language].apiDesc;
            document.getElementById('api-note').textContent = translations[language].apiNote;
            document.getElementById('sample-title').textContent = translations[language].sampleTitle;
            
            // Update active button
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === language) {
                    btn.classList.add('active');
                }
            });
            
            // Re-render quotes
            renderQuotes();
        }

        // Add event listeners for language buttons
        document.querySelectorAll('.language-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                switchLanguage(btn.dataset.lang);
            });
        });
    </script>
</body>
</html>