<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂêçË®Ä„Éá„Éº„Çø„Éô„Éº„Çπ</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .quote {
            border-left: 4px solid #007AFF;
            margin: 30px 0;
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }
        .quote-text {
            font-size: 24px;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.6;
            font-weight: 300;
        }
        .quote-author {
            color: #666;
            font-style: italic;
        }
        .api-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .language-switcher {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .radio-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .radio-item input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: #007AFF;
        }
        .radio-item label {
            font-size: 16px;
            cursor: pointer;
            color: #333;
        }
        .new-quote-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px auto;
            display: block;
        }
        .new-quote-btn:hover {
            background: #218838;
        }
        .original-text {
            font-style: italic;
            color: #888;
            margin-top: 10px;
            font-size: 16px;
        }
        .quote-meta {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .tag {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: #666;
        }
        .tag.category {
            background: #e3f2fd;
            color: #1976d2;
        }
        .tag.language {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .quote-source {
            color: #888;
            font-size: 14px;
            margin-top: 8px;
        }
        .quote-links {
            margin-top: 10px;
        }
        .quote-links a {
            color: #007AFF;
            text-decoration: none;
            font-size: 14px;
            margin-right: 15px;
        }
        .quote-links a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="main-title">üìù ‰ªäÊó•„ÅÆÂêçË®Ä</h1>
        
        <div class="language-switcher">
            <h3 id="language-title">Ë°®Á§∫Ë®ÄË™û</h3>
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="lang-ja" name="language" value="ja" checked>
                    <label for="lang-ja">Êó•Êú¨Ë™û</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="lang-en" name="language" value="en">
                    <label for="lang-en">English</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="lang-zh-tw" name="language" value="zh-TW">
                    <label for="lang-zh-tw">ÁπÅÈ´î‰∏≠Êñá</label>
                </div>
            </div>
        </div>
        
        <div id="quote-container">
            <!-- „Åì„Åì„Å´1„Å§„ÅÆÂêçË®Ä„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô -->
        </div>
        
        <button class="new-quote-btn" id="new-quote-btn">Êñ∞„Åó„ÅÑÂêçË®Ä</button>
        
        <div class="api-info">
            <h3 id="api-title">API „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà</h3>
            <p><strong id="api-desc">„Éá„Éº„Çø„Éï„Ç°„Ç§„É´:</strong> <code>quotes.json</code>, <code>authors.json</code>, <code>categories.json</code></p>
            <p id="api-note">„Åì„ÅÆJSON„Éï„Ç°„Ç§„É´„Å´„ÅØ„ÄÅÂêçË®Ä„Éá„Éº„Çø„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</p>
        </div>
    </div>

    <script>
        let quotesData = null;
        let authorsData = null;
        let categoriesData = null;
        let currentLanguage = 'ja';
        let currentQuoteIndex = 0;

        const translations = {
            ja: {
                title: 'üìù ‰ªäÊó•„ÅÆÂêçË®Ä',
                languageTitle: 'Ë°®Á§∫Ë®ÄË™û',
                newQuoteBtn: 'Êñ∞„Åó„ÅÑÂêçË®Ä',
                apiTitle: 'API „Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà',
                apiDesc: '„Éá„Éº„Çø„Éï„Ç°„Ç§„É´:',
                apiNote: '„Åì„ÅÆJSON„Éï„Ç°„Ç§„É´„Å´„ÅØ„ÄÅÂêçË®Ä„Éá„Éº„Çø„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                original: 'ÂéüÊñá',
                source: 'Âá∫ÂÖ∏'
            },
            en: {
                title: 'üìù Quote of the Day',
                languageTitle: 'Display Language',
                newQuoteBtn: 'New Quote',
                apiTitle: 'API Endpoints',
                apiDesc: 'Data Files:',
                apiNote: 'These JSON files contain quote data.',
                original: 'Original',
                source: 'Source'
            },
            'zh-TW': {
                title: 'üìù ‰ªäÊó•ÂêçË®Ä',
                languageTitle: 'È°ØÁ§∫Ë™ûË®Ä',
                newQuoteBtn: 'Êñ∞ÂêçË®Ä',
                apiTitle: 'API Á´ØÈªû',
                apiDesc: 'Ë≥áÊñôÊ™îÊ°à:',
                apiNote: 'ÈÄô‰∫õJSONÊ™îÊ°àÂåÖÂê´ÂêçË®ÄË≥áÊñô„ÄÇ',
                original: 'ÂéüÊñá',
                source: 'Âá∫Ëôï'
            }
        };

        // Load all data files
        Promise.all([
            fetch('quotes.json').then(r => r.json()),
            fetch('authors.json').then(r => r.json()),
            fetch('categories.json').then(r => r.json())
        ])
        .then(([quotes, authors, categories]) => {
            quotesData = quotes;
            authorsData = authors;
            categoriesData = categories;
            showRandomQuote();
        })
        .catch(error => console.error('Error loading data:', error));

        function getAuthorName(authorId, language) {
            const author = authorsData.authors.find(a => a.author_id === authorId);
            if (!author) return authorId.replace(/_/g, ' ');
            
            if (language === 'en' || !author.name_translations?.[language]) {
                return author.name;
            }
            return author.name_translations[language];
        }

        function getCategoryName(categoryId, language) {
            const category = categoriesData.categories.find(c => c.category_id === categoryId);
            if (!category) return categoryId.replace(/_/g, ' ');
            
            if (language === 'en' || !category.name_translations?.[language]) {
                return category.name;
            }
            return category.name_translations[language];
        }

        function getQuoteText(quote, language) {
            if (quote.translations?.[language]) {
                return quote.translations[language].text;
            }
            return quote.original_text;
        }

        function showRandomQuote() {
            if (!quotesData || !authorsData || !categoriesData) return;
            
            // Get random quote
            currentQuoteIndex = Math.floor(Math.random() * quotesData.quotes.length);
            renderCurrentQuote();
        }

        function renderCurrentQuote() {
            const quote = quotesData.quotes[currentQuoteIndex];
            const container = document.getElementById('quote-container');
            
            const text = getQuoteText(quote, currentLanguage);
            const authorName = getAuthorName(quote.author_id, currentLanguage);
            const categoryName = getCategoryName(quote.category_id, currentLanguage);
            const showOriginal = quote.translations?.[currentLanguage] && text !== quote.original_text;
            
            let linksHtml = '';
            if (quote.links && quote.links.length > 0) {
                linksHtml = '<div class="quote-links">' +
                    quote.links.map(link => `<a href="${link.url}" target="_blank">${link.title}</a>`).join('') +
                    '</div>';
            }
            
            container.innerHTML = `
                <div class="quote">
                    <div class="quote-text">"${text}"</div>
                    ${showOriginal ? `<div class="original-text">${translations[currentLanguage].original}: "${quote.original_text}"</div>` : ''}
                    <div class="quote-author">‚Äî ${authorName}</div>
                    ${quote.source ? `<div class="quote-source">${translations[currentLanguage].source}: ${quote.source}</div>` : ''}
                    <div class="quote-meta">
                        <span class="tag category">${categoryName}</span>
                        <span class="tag language">${quote.original_language_code.toUpperCase()}</span>
                    </div>
                    ${linksHtml}
                </div>
            `;
        }

        function switchLanguage(language) {
            currentLanguage = language;
            
            // Update UI text
            document.getElementById('main-title').textContent = translations[language].title;
            document.getElementById('language-title').textContent = translations[language].languageTitle;
            document.getElementById('new-quote-btn').textContent = translations[language].newQuoteBtn;
            document.getElementById('api-title').textContent = translations[language].apiTitle;
            document.getElementById('api-desc').textContent = translations[language].apiDesc;
            document.getElementById('api-note').textContent = translations[language].apiNote;
            
            // Re-render current quote
            renderCurrentQuote();
        }

        // Add event listeners for radio buttons
        document.querySelectorAll('input[name="language"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                if (e.target.checked) {
                    switchLanguage(e.target.value);
                }
            });
        });

        // Add event listener for new quote button
        document.getElementById('new-quote-btn').addEventListener('click', showRandomQuote);
    </script>
</body>
</html>